tests_012/test_contract.py::TestTypecheck::test_typecheck[attic/forward.tz]

Well typed
Gas remaining: 1039634.172 units remaining
{ parameter (or string nat) ;
  storage
    (pair (pair nat (pair mutez mutez))
          (pair (pair nat (pair timestamp timestamp))
                (pair (pair mutez mutez) (pair (pair address address) address)))) ;
  code { DUP
         /* [ pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address)
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         CDDADDR ;
         PUSH int
              86400
         /* [ int : timestamp
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         SWAP
         /* [ timestamp : int
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         ADD
         /* [ timestamp
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         NOW
         /* [ @now timestamp : timestamp
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         COMPARE
         /* [ int
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         LT
         /* [ bool
            : pair (or @parameter string nat)
                 (pair @storage
                    (pair nat mutez mutez)
                    (pair nat timestamp timestamp)
                    (pair mutez mutez)
                    (pair address address)
                    address) ] */ ;
         IF { DUP
              /* [ pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address)
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              CAR
              /* [ @parameter or string nat
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              IF_LEFT
                { DUP
                  /* [ @parameter.left string : @parameter.left string
                     : pair (or @parameter string nat)
                          (pair @storage
                             (pair nat mutez mutez)
                             (pair nat timestamp timestamp)
                             (pair mutez mutez)
                             (pair address address)
                             address) ] */ ;
                  PUSH string
                       "buyer"
                  /* [ string : @parameter.left string : @parameter.left string
                     : pair (or @parameter string nat)
                          (pair @storage
                             (pair nat mutez mutez)
                             (pair nat timestamp timestamp)
                             (pair mutez mutez)
                             (pair address address)
                             address) ] */ ;
                  COMPARE
                  /* [ int : @parameter.left string
                     : pair (or @parameter string nat)
                          (pair @storage
                             (pair nat mutez mutez)
                             (pair nat timestamp timestamp)
                             (pair mutez mutez)
                             (pair address address)
                             address) ] */ ;
                  EQ
                  /* [ bool : @parameter.left string
                     : pair (or @parameter string nat)
                          (pair @storage
                             (pair nat mutez mutez)
                             (pair nat timestamp timestamp)
                             (pair mutez mutez)
                             (pair address address)
                             address) ] */ ;
                  IF { DROP
                       /* [ pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       DUP
                       /* [ pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address)
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       CDADAR ;
                       DIP { AMOUNT
                             /* [ @amount mutez
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ }
                       /* [ mutez : @amount mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       ADD
                       /* [ mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       DIP { DUP
                             /* [ pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address)
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             CDADDR }
                       /* [ mutez : mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       PAIR
                       /* [ pair mutez mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       PUSH nat
                            0
                       /* [ nat : pair mutez mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       PAIR
                       /* [ pair nat mutez mutez
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       DIP { CDDR }
                       /* [ pair nat mutez mutez
                          : pair (pair nat timestamp timestamp) (pair mutez mutez) (pair address address) address ] */ ;
                       PAIR
                       /* [ pair (pair nat mutez mutez)
                               (pair nat timestamp timestamp)
                               (pair mutez mutez)
                               (pair address address)
                               address ] */ ;
                       NIL operation
                       /* [ list operation
                          : pair (pair nat mutez mutez)
                               (pair nat timestamp timestamp)
                               (pair mutez mutez)
                               (pair address address)
                               address ] */ ;
                       PAIR
                       /* [ pair (list operation)
                               (pair nat mutez mutez)
                               (pair nat timestamp timestamp)
                               (pair mutez mutez)
                               (pair address address)
                               address ] */ }
                     { PUSH string
                            "seller"
                       /* [ string : @parameter.left string
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       COMPARE
                       /* [ int
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       EQ
                       /* [ bool
                          : pair (or @parameter string nat)
                               (pair @storage
                                  (pair nat mutez mutez)
                                  (pair nat timestamp timestamp)
                                  (pair mutez mutez)
                                  (pair address address)
                                  address) ] */ ;
                       IF { DUP
                            /* [ pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address)
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            CDADDR ;
                            DIP { AMOUNT
                                  /* [ @amount mutez
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ }
                            /* [ mutez : @amount mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            ADD
                            /* [ mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            DIP { DUP
                                  /* [ pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address)
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  CDADAR }
                            /* [ mutez : mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            SWAP
                            /* [ mutez : mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            PAIR
                            /* [ pair mutez mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            PUSH nat
                                 0
                            /* [ nat : pair mutez mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            PAIR
                            /* [ pair nat mutez mutez
                               : pair (or @parameter string nat)
                                    (pair @storage
                                       (pair nat mutez mutez)
                                       (pair nat timestamp timestamp)
                                       (pair mutez mutez)
                                       (pair address address)
                                       address) ] */ ;
                            DIP { CDDR }
                            /* [ pair nat mutez mutez
                               : pair (pair nat timestamp timestamp) (pair mutez mutez) (pair address address) address ] */ ;
                            PAIR
                            /* [ pair (pair nat mutez mutez)
                                    (pair nat timestamp timestamp)
                                    (pair mutez mutez)
                                    (pair address address)
                                    address ] */ ;
                            NIL operation
                            /* [ list operation
                               : pair (pair nat mutez mutez)
                                    (pair nat timestamp timestamp)
                                    (pair mutez mutez)
                                    (pair address address)
                                    address ] */ ;
                            PAIR
                            /* [ pair (list operation)
                                    (pair nat mutez mutez)
                                    (pair nat timestamp timestamp)
                                    (pair mutez mutez)
                                    (pair address address)
                                    address ] */ }
                          { FAIL } } }
                { FAIL } }
            { BALANCE
              /* [ @balance mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              PUSH mutez
                   0
              /* [ mutez : @balance mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              IFCMPEQ
                { FAIL }
                { /* [ pair (or @parameter string nat)
                          (pair @storage
                             (pair nat mutez mutez)
                             (pair nat timestamp timestamp)
                             (pair mutez mutez)
                             (pair address address)
                             address) ] */ } ;
              DUP
              /* [ pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address)
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              CDDAAR ;
              DIP { DUP
                    /* [ pair (or @parameter string nat)
                            (pair @storage
                               (pair nat mutez mutez)
                               (pair nat timestamp timestamp)
                               (pair mutez mutez)
                               (pair address address)
                               address)
                       : pair (or @parameter string nat)
                            (pair @storage
                               (pair nat mutez mutez)
                               (pair nat timestamp timestamp)
                               (pair mutez mutez)
                               (pair address address)
                               address) ] */ ;
                    CDDDADR }
              /* [ nat : mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              MUL
              /* [ mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              PUSH nat
                   2
              /* [ nat : mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              MUL
              /* [ mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              BALANCE
              /* [ @balance mutez : mutez
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              COMPARE
              /* [ int
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              LT
              /* [ bool
                 : pair (or @parameter string nat)
                      (pair @storage
                         (pair nat mutez mutez)
                         (pair nat timestamp timestamp)
                         (pair mutez mutez)
                         (pair address address)
                         address) ] */ ;
              IF { CDR
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   DUP
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   CADAR ;
                   DIP { DUP
                         /* [ @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address ] */ ;
                         CDDDAAR }
                   /* [ mutez : address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   DIP { CONTRACT
                           unit
                         /* [ @contract option (contract unit)
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address ] */ ;
                         ASSERT_SOME }
                   /* [ mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   UNIT
                   /* [ unit : mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   TRANSFER_TOKENS
                   /* [ operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   NIL operation
                   /* [ list operation : operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   SWAP
                   /* [ operation : list operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   CONS
                   /* [ list operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   SWAP
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   DUP
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   CADDR ;
                   DIP { DUP
                         /* [ @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address : list operation ] */ ;
                         CDDDADR }
                   /* [ mutez : address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   DIP { CONTRACT
                           unit
                         /* [ @contract option (contract unit)
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address : list operation ] */ ;
                         ASSERT_SOME }
                   /* [ mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   UNIT
                   /* [ unit : mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   TRANSFER_TOKENS
                   /* [ operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   SWAP
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : operation : list operation ] */ ;
                   DIP { CONS /* [ list operation ] */ }
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   DUP
                   /* [ @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   CADAR ;
                   DIP { DUP
                         /* [ @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address : list operation ] */ ;
                         CADDR }
                   /* [ mutez : mutez
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   ADD
                   /* [ mutez
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   BALANCE
                   /* [ @balance mutez : mutez
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   SUB_MUTEZ
                   /* [ option mutez
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   ASSERT_SOME ;
                   DIP { DUP
                         /* [ @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address : list operation ] */ ;
                         CDDDDR }
                   /* [ @some mutez : address
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   DIP { CONTRACT
                           unit
                         /* [ @contract option (contract unit)
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address : list operation ] */ ;
                         ASSERT_SOME }
                   /* [ @some mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   UNIT
                   /* [ unit : @some mutez : @contract.some contract unit
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   TRANSFER_TOKENS
                   /* [ operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address : list operation ] */ ;
                   DIP { SWAP
                         /* [ list operation
                            : @storage pair (pair nat mutez mutez)
                                 (pair nat timestamp timestamp)
                                 (pair mutez mutez)
                                 (pair address address)
                                 address ] */ }
                   /* [ operation : list operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   CONS
                   /* [ list operation
                      : @storage pair (pair nat mutez mutez)
                           (pair nat timestamp timestamp)
                           (pair mutez mutez)
                           (pair address address)
                           address ] */ ;
                   PAIR
                   /* [ pair (list operation)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address) ] */ }
                 { DUP
                   /* [ pair (or @parameter string nat)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address)
                      : pair (or @parameter string nat)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address) ] */ ;
                   CDDADAR ;
                   NOW
                   /* [ @now timestamp : timestamp
                      : pair (or @parameter string nat)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address) ] */ ;
                   COMPARE
                   /* [ int
                      : pair (or @parameter string nat)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address) ] */ ;
                   LT
                   /* [ bool
                      : pair (or @parameter string nat)
                           (pair @storage
                              (pair nat mutez mutez)
                              (pair nat timestamp timestamp)
                              (pair mutez mutez)
                              (pair address address)
                              address) ] */ ;
                   IF { FAIL }
                      { DUP
                        /* [ pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address)
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        CDDADAR ;
                        PUSH int
                             86400
                        /* [ int : timestamp
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        ADD
                        /* [ timestamp
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        NOW
                        /* [ @now timestamp : timestamp
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        COMPARE
                        /* [ int
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        LT
                        /* [ bool
                           : pair (or @parameter string nat)
                                (pair @storage
                                   (pair nat mutez mutez)
                                   (pair nat timestamp timestamp)
                                   (pair mutez mutez)
                                   (pair address address)
                                   address) ] */ ;
                        IF { DUP
                             /* [ pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address)
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             CAR
                             /* [ @parameter or string nat
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             IF_LEFT
                               { PUSH string
                                      "buyer"
                                 /* [ string : @parameter.left string
                                    : pair (or @parameter string nat)
                                         (pair @storage
                                            (pair nat mutez mutez)
                                            (pair nat timestamp timestamp)
                                            (pair mutez mutez)
                                            (pair address address)
                                            address) ] */ ;
                                 COMPARE
                                 /* [ int
                                    : pair (or @parameter string nat)
                                         (pair @storage
                                            (pair nat mutez mutez)
                                            (pair nat timestamp timestamp)
                                            (pair mutez mutez)
                                            (pair address address)
                                            address) ] */ ;
                                 EQ
                                 /* [ bool
                                    : pair (or @parameter string nat)
                                         (pair @storage
                                            (pair nat mutez mutez)
                                            (pair nat timestamp timestamp)
                                            (pair mutez mutez)
                                            (pair address address)
                                            address) ] */ ;
                                 IF { DUP
                                      /* [ pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address)
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      CDADAR ;
                                      DIP { AMOUNT
                                            /* [ @amount mutez
                                               : pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address) ] */ }
                                      /* [ mutez : @amount mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      ADD
                                      /* [ mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      DUP
                                      /* [ mutez : mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      DIIP { DUP
                                             /* [ pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address)
                                                : pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address) ] */ ;
                                             CDDAAR ;
                                             DIP { DUP
                                                   /* [ pair (or @parameter string nat)
                                                           (pair @storage
                                                              (pair nat mutez mutez)
                                                              (pair nat timestamp timestamp)
                                                              (pair mutez mutez)
                                                              (pair address address)
                                                              address)
                                                      : pair (or @parameter string nat)
                                                           (pair @storage
                                                              (pair nat mutez mutez)
                                                              (pair nat timestamp timestamp)
                                                              (pair mutez mutez)
                                                              (pair address address)
                                                              address) ] */ ;
                                                   CDDDAAR }
                                             /* [ nat : mutez
                                                : pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address) ] */ ;
                                             MUL
                                             /* [ mutez
                                                : pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address) ] */ }
                                      /* [ mutez : mutez : mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      DIP { COMPARE
                                            /* [ int
                                               : pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address) ] */ ;
                                            GT
                                            /* [ bool
                                               : pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address) ] */ ;
                                            IF { FAIL }
                                               { /* [ pair (or @parameter string nat)
                                                         (pair @storage
                                                            (pair nat mutez mutez)
                                                            (pair nat timestamp timestamp)
                                                            (pair mutez mutez)
                                                            (pair address address)
                                                            address) ] */ } }
                                      /* [ mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      DIP { DUP
                                            /* [ pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address)
                                               : pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address) ] */ ;
                                            CDADDR }
                                      /* [ mutez : mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      PAIR
                                      /* [ pair mutez mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      PUSH nat
                                           0
                                      /* [ nat : pair mutez mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      PAIR
                                      /* [ pair nat mutez mutez
                                         : pair (or @parameter string nat)
                                              (pair @storage
                                                 (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address) ] */ ;
                                      DIP { CDDR }
                                      /* [ pair nat mutez mutez
                                         : pair (pair nat timestamp timestamp) (pair mutez mutez) (pair address address) address ] */ ;
                                      PAIR
                                      /* [ pair (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address ] */ ;
                                      NIL operation
                                      /* [ list operation
                                         : pair (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address ] */ ;
                                      PAIR
                                      /* [ pair (list operation)
                                              (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address ] */ }
                                    { FAIL } }
                               { FAIL } }
                           { DUP
                             /* [ pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address)
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             CDDAAR ;
                             DIP { DUP
                                   /* [ pair (or @parameter string nat)
                                           (pair @storage
                                              (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address)
                                      : pair (or @parameter string nat)
                                           (pair @storage
                                              (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address) ] */ ;
                                   CDDDAAR }
                             /* [ nat : mutez
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             MUL
                             /* [ mutez
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             DIP { DUP
                                   /* [ pair (or @parameter string nat)
                                           (pair @storage
                                              (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address)
                                      : pair (or @parameter string nat)
                                           (pair @storage
                                              (pair nat mutez mutez)
                                              (pair nat timestamp timestamp)
                                              (pair mutez mutez)
                                              (pair address address)
                                              address) ] */ ;
                                   CDADAR }
                             /* [ mutez : mutez
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             COMPARE
                             /* [ int
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             NEQ
                             /* [ bool
                                : pair (or @parameter string nat)
                                     (pair @storage
                                        (pair nat mutez mutez)
                                        (pair nat timestamp timestamp)
                                        (pair mutez mutez)
                                        (pair address address)
                                        address) ] */ ;
                             IF { BALANCE
                                  /* [ @balance mutez
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  DIP { DUP
                                        /* [ pair (or @parameter string nat)
                                                (pair @storage
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address)
                                           : pair (or @parameter string nat)
                                                (pair @storage
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address) ] */ ;
                                        CDDDDADR }
                                  /* [ @balance mutez : address
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  DIIP { CDR
                                         /* [ @storage pair (pair nat mutez mutez)
                                                 (pair nat timestamp timestamp)
                                                 (pair mutez mutez)
                                                 (pair address address)
                                                 address ] */ }
                                  /* [ @balance mutez : address
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  DIP { CONTRACT
                                          unit
                                        /* [ @contract option (contract unit)
                                           : @storage pair (pair nat mutez mutez)
                                                (pair nat timestamp timestamp)
                                                (pair mutez mutez)
                                                (pair address address)
                                                address ] */ ;
                                        ASSERT_SOME }
                                  /* [ @balance mutez : @contract.some contract unit
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  UNIT
                                  /* [ unit : @balance mutez : @contract.some contract unit
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  TRANSFER_TOKENS
                                  /* [ operation
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  NIL operation
                                  /* [ list operation : operation
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  SWAP
                                  /* [ operation : list operation
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  CONS
                                  /* [ list operation
                                     : @storage pair (pair nat mutez mutez)
                                          (pair nat timestamp timestamp)
                                          (pair mutez mutez)
                                          (pair address address)
                                          address ] */ ;
                                  PAIR
                                  /* [ pair (list operation)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ }
                                { DUP
                                  /* [ pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address)
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  CDDADAR ;
                                  PUSH int
                                       86400
                                  /* [ int : timestamp
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  ADD
                                  /* [ timestamp
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  PUSH int
                                       86400
                                  /* [ int : timestamp
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  ADD
                                  /* [ timestamp
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  NOW
                                  /* [ @now timestamp : timestamp
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  COMPARE
                                  /* [ int
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  LT
                                  /* [ bool
                                     : pair (or @parameter string nat)
                                          (pair @storage
                                             (pair nat mutez mutez)
                                             (pair nat timestamp timestamp)
                                             (pair mutez mutez)
                                             (pair address address)
                                             address) ] */ ;
                                  IF { DUP
                                       /* [ pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address)
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       CDDDDDR ;
                                       SENDER
                                       /* [ @sender address : address
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       COMPARE
                                       /* [ int
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       NEQ
                                       /* [ bool
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       IF { FAIL }
                                          { /* [ pair (or @parameter string nat)
                                                    (pair @storage
                                                       (pair nat mutez mutez)
                                                       (pair nat timestamp timestamp)
                                                       (pair mutez mutez)
                                                       (pair address address)
                                                       address) ] */ } ;
                                       DUP
                                       /* [ pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address)
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       CAR
                                       /* [ @parameter or string nat
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       IF_LEFT
                                         { FAIL }
                                         { DIP { DUP
                                                 /* [ pair (or @parameter string nat)
                                                         (pair @storage
                                                            (pair nat mutez mutez)
                                                            (pair nat timestamp timestamp)
                                                            (pair mutez mutez)
                                                            (pair address address)
                                                            address)
                                                    : pair (or @parameter string nat)
                                                         (pair @storage
                                                            (pair nat mutez mutez)
                                                            (pair nat timestamp timestamp)
                                                            (pair mutez mutez)
                                                            (pair address address)
                                                            address) ] */ ;
                                                 CDAAR }
                                           /* [ @parameter.right nat : nat
                                              : pair (or @parameter string nat)
                                                   (pair @storage
                                                      (pair nat mutez mutez)
                                                      (pair nat timestamp timestamp)
                                                      (pair mutez mutez)
                                                      (pair address address)
                                                      address) ] */ ;
                                           ADD
                                           /* [ nat
                                              : pair (or @parameter string nat)
                                                   (pair @storage
                                                      (pair nat mutez mutez)
                                                      (pair nat timestamp timestamp)
                                                      (pair mutez mutez)
                                                      (pair address address)
                                                      address) ] */ ;
                                           DIP { DUP
                                                 /* [ pair (or @parameter string nat)
                                                         (pair @storage
                                                            (pair nat mutez mutez)
                                                            (pair nat timestamp timestamp)
                                                            (pair mutez mutez)
                                                            (pair address address)
                                                            address)
                                                    : pair (or @parameter string nat)
                                                         (pair @storage
                                                            (pair nat mutez mutez)
                                                            (pair nat timestamp timestamp)
                                                            (pair mutez mutez)
                                                            (pair address address)
                                                            address) ] */ ;
                                                 CDADR }
                                           /* [ nat : pair mutez mutez
                                              : pair (or @parameter string nat)
                                                   (pair @storage
                                                      (pair nat mutez mutez)
                                                      (pair nat timestamp timestamp)
                                                      (pair mutez mutez)
                                                      (pair address address)
                                                      address) ] */ ;
                                           PAIR
                                           /* [ pair nat mutez mutez
                                              : pair (or @parameter string nat)
                                                   (pair @storage
                                                      (pair nat mutez mutez)
                                                      (pair nat timestamp timestamp)
                                                      (pair mutez mutez)
                                                      (pair address address)
                                                      address) ] */ ;
                                           DIP { CDDR }
                                           /* [ pair nat mutez mutez
                                              : pair (pair nat timestamp timestamp) (pair mutez mutez) (pair address address) address ] */ ;
                                           PAIR
                                           /* [ pair (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           UNIT
                                           /* [ unit
                                              : pair (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           PAIR
                                           /* [ pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           DUP
                                           /* [ pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address
                                              : pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           CDAAR ;
                                           DIP { DUP
                                                 /* [ pair unit
                                                         (pair nat mutez mutez)
                                                         (pair nat timestamp timestamp)
                                                         (pair mutez mutez)
                                                         (pair address address)
                                                         address
                                                    : pair unit
                                                         (pair nat mutez mutez)
                                                         (pair nat timestamp timestamp)
                                                         (pair mutez mutez)
                                                         (pair address address)
                                                         address ] */ ;
                                                 CDDAAR }
                                           /* [ nat : nat
                                              : pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           COMPARE
                                           /* [ int
                                              : pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           LT
                                           /* [ bool
                                              : pair unit
                                                   (pair nat mutez mutez)
                                                   (pair nat timestamp timestamp)
                                                   (pair mutez mutez)
                                                   (pair address address)
                                                   address ] */ ;
                                           IF { CDR
                                                /* [ pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                NIL operation
                                                /* [ list operation
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ }
                                              { BALANCE
                                                /* [ @balance mutez
                                                   : pair unit
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                DIP { DUP
                                                      /* [ pair unit
                                                              (pair nat mutez mutez)
                                                              (pair nat timestamp timestamp)
                                                              (pair mutez mutez)
                                                              (pair address address)
                                                              address
                                                         : pair unit
                                                              (pair nat mutez mutez)
                                                              (pair nat timestamp timestamp)
                                                              (pair mutez mutez)
                                                              (pair address address)
                                                              address ] */ ;
                                                      CDDDDADR }
                                                /* [ @balance mutez : address
                                                   : pair unit
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                DIIP { CDR
                                                       /* [ pair (pair nat mutez mutez)
                                                               (pair nat timestamp timestamp)
                                                               (pair mutez mutez)
                                                               (pair address address)
                                                               address ] */ }
                                                /* [ @balance mutez : address
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                DIP { CONTRACT
                                                        unit
                                                      /* [ @contract option (contract unit)
                                                         : pair (pair nat mutez mutez)
                                                              (pair nat timestamp timestamp)
                                                              (pair mutez mutez)
                                                              (pair address address)
                                                              address ] */ ;
                                                      ASSERT_SOME }
                                                /* [ @balance mutez : @contract.some contract unit
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                UNIT
                                                /* [ unit : @balance mutez : @contract.some contract unit
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                TRANSFER_TOKENS
                                                /* [ operation
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                NIL operation
                                                /* [ list operation : operation
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                SWAP
                                                /* [ operation : list operation
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ ;
                                                CONS
                                                /* [ list operation
                                                   : pair (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address ] */ } } ;
                                       PAIR
                                       /* [ pair (list operation)
                                               (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ }
                                     { BALANCE
                                       /* [ @balance mutez
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       DIP { DUP
                                             /* [ pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address)
                                                : pair (or @parameter string nat)
                                                     (pair @storage
                                                        (pair nat mutez mutez)
                                                        (pair nat timestamp timestamp)
                                                        (pair mutez mutez)
                                                        (pair address address)
                                                        address) ] */ ;
                                             CDDDDAAR }
                                       /* [ @balance mutez : address
                                          : pair (or @parameter string nat)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ ;
                                       DIIP { CDR
                                              /* [ @storage pair (pair nat mutez mutez)
                                                      (pair nat timestamp timestamp)
                                                      (pair mutez mutez)
                                                      (pair address address)
                                                      address ] */ }
                                       /* [ @balance mutez : address
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       DIP { CONTRACT
                                               unit
                                             /* [ @contract option (contract unit)
                                                : @storage pair (pair nat mutez mutez)
                                                     (pair nat timestamp timestamp)
                                                     (pair mutez mutez)
                                                     (pair address address)
                                                     address ] */ ;
                                             ASSERT_SOME }
                                       /* [ @balance mutez : @contract.some contract unit
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       UNIT
                                       /* [ unit : @balance mutez : @contract.some contract unit
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       TRANSFER_TOKENS
                                       /* [ operation
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       NIL operation
                                       /* [ list operation : operation
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       SWAP
                                       /* [ operation : list operation
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       CONS
                                       /* [ list operation
                                          : @storage pair (pair nat mutez mutez)
                                               (pair nat timestamp timestamp)
                                               (pair mutez mutez)
                                               (pair address address)
                                               address ] */ ;
                                       PAIR
                                       /* [ pair (list operation)
                                               (pair @storage
                                                  (pair nat mutez mutez)
                                                  (pair nat timestamp timestamp)
                                                  (pair mutez mutez)
                                                  (pair address address)
                                                  address) ] */ } } } } } } } }
